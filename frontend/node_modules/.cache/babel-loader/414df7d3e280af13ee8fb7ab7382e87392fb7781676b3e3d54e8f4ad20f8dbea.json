{"ast":null,"code":"/**\n * API Client Utility\n * Handles API requests with automatic token injection\n */\n\nexport const API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\nexport async function apiRequest(endpoint, options = {}) {\n  const token = localStorage.getItem('token');\n  const headers = {\n    'Content-Type': 'application/json',\n    ...(token && {\n      'Authorization': `Bearer ${token}`\n    }),\n    ...options.headers\n  };\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n    ...options,\n    headers\n  });\n  if (!response.ok) {\n    // Handle 401 Unauthorized by clearing token and redirecting to login\n    if (response.status === 401) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      window.location.href = '/login';\n      throw new Error('Session expired. Please login again.');\n    }\n    throw new Error('API request failed');\n  }\n  return response.json();\n}\n\n// Common API methods\nexport const api = {\n  get: endpoint => apiRequest(endpoint),\n  post: (endpoint, data) => apiRequest(endpoint, {\n    method: 'POST',\n    body: JSON.stringify(data)\n  }),\n  put: (endpoint, data) => apiRequest(endpoint, {\n    method: 'PUT',\n    body: JSON.stringify(data)\n  }),\n  delete: endpoint => apiRequest(endpoint, {\n    method: 'DELETE'\n  })\n};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_BASE_URL","apiRequest","endpoint","options","token","localStorage","getItem","headers","response","fetch","ok","status","removeItem","window","location","href","Error","json","api","get","post","data","method","body","JSON","stringify","put","delete"],"sources":["/Users/tobe/Documents/Workshop/Shortlet/frontend/src/utils/api.ts"],"sourcesContent":["/**\n * API Client Utility\n * Handles API requests with automatic token injection\n */\n\nexport const API_BASE_URL = process.env.REACT_APP_API_BASE_URL!;\n\ninterface RequestOptions extends RequestInit {\n  token?: string;\n}\n\nexport async function apiRequest(endpoint: string, options: RequestOptions = {}) {\n  const token = localStorage.getItem('token');\n  \n  const headers = {\n    'Content-Type': 'application/json',\n    ...(token && { 'Authorization': `Bearer ${token}` }),\n    ...options.headers,\n  };\n\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n    ...options,\n    headers,\n  });\n\n  if (!response.ok) {\n    // Handle 401 Unauthorized by clearing token and redirecting to login\n    if (response.status === 401) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      window.location.href = '/login';\n      throw new Error('Session expired. Please login again.');\n    }\n    throw new Error('API request failed');\n  }\n\n  return response.json();\n}\n\n// Common API methods\nexport const api = {\n  get: (endpoint: string) => apiRequest(endpoint),\n  \n  post: (endpoint: string, data: any) => apiRequest(endpoint, {\n    method: 'POST',\n    body: JSON.stringify(data),\n  }),\n  \n  put: (endpoint: string, data: any) => apiRequest(endpoint, {\n    method: 'PUT',\n    body: JSON.stringify(data),\n  }),\n  \n  delete: (endpoint: string) => apiRequest(endpoint, {\n    method: 'DELETE',\n  }),\n}; "],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,OAAO,MAAMA,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAuB;AAM/D,OAAO,eAAeC,UAAUA,CAACC,QAAgB,EAAEC,OAAuB,GAAG,CAAC,CAAC,EAAE;EAC/E,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAE3C,MAAMC,OAAO,GAAG;IACd,cAAc,EAAE,kBAAkB;IAClC,IAAIH,KAAK,IAAI;MAAE,eAAe,EAAE,UAAUA,KAAK;IAAG,CAAC,CAAC;IACpD,GAAGD,OAAO,CAACI;EACb,CAAC;EAED,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGZ,YAAY,GAAGK,QAAQ,EAAE,EAAE;IACzD,GAAGC,OAAO;IACVI;EACF,CAAC,CAAC;EAEF,IAAI,CAACC,QAAQ,CAACE,EAAE,EAAE;IAChB;IACA,IAAIF,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;MAC3BN,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC;MAChCP,YAAY,CAACO,UAAU,CAAC,MAAM,CAAC;MAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;MAC/B,MAAM,IAAIC,KAAK,CAAC,sCAAsC,CAAC;IACzD;IACA,MAAM,IAAIA,KAAK,CAAC,oBAAoB,CAAC;EACvC;EAEA,OAAOR,QAAQ,CAACS,IAAI,CAAC,CAAC;AACxB;;AAEA;AACA,OAAO,MAAMC,GAAG,GAAG;EACjBC,GAAG,EAAGjB,QAAgB,IAAKD,UAAU,CAACC,QAAQ,CAAC;EAE/CkB,IAAI,EAAEA,CAAClB,QAAgB,EAAEmB,IAAS,KAAKpB,UAAU,CAACC,QAAQ,EAAE;IAC1DoB,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,IAAI;EAC3B,CAAC,CAAC;EAEFK,GAAG,EAAEA,CAACxB,QAAgB,EAAEmB,IAAS,KAAKpB,UAAU,CAACC,QAAQ,EAAE;IACzDoB,MAAM,EAAE,KAAK;IACbC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,IAAI;EAC3B,CAAC,CAAC;EAEFM,MAAM,EAAGzB,QAAgB,IAAKD,UAAU,CAACC,QAAQ,EAAE;IACjDoB,MAAM,EAAE;EACV,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}